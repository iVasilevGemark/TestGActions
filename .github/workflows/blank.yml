name: ProductX CI/CD

on:
  push:
    branches: [ develop ]
  pull_request:
    branches: [ develop ]

jobs:
  ktlint:
    runs-on: ubuntu-latest

    steps:
      - name: Keystore
        env:
          STORE_FILE_KEYSTORE: ${{ secrets.STORE_FILE_KEYSTORE }}
          STORE_PASSWORD_KEYSTORE: ${{ secrets.STORE_PASSWORD_KEYSTORE }}
          KEY_ALIAS_KEYSTORE: ${{ secrets.KEY_ALIAS_KEYSTORE }}
          KEY_PASSWORD_KEYSTORE: ${{ secrets.KEY_PASSWORD_KEYSTORE }}
        run: |
          sudo sh /home/runner/work/TestGActions/.github/workflows/keystore.sh
      - name: Upload release_keystore
        uses: actions/upload-artifact@v2
        with:
          name: release_keystore_file
          path: /home/runner/work/TestGActions/TestGActions/release_keystore.properties